--Cinepolis SQL Script
drop table Reserva;
drop table Clientes;
drop table Funciones;
drop table Salas;
drop table Peliculas;


create table Peliculas(
    pelicula_id number primary key,
    titulo VARCHAR2(100) not null,
    genero VARCHAR2(100) not null,
    duracion_min number not null,
    clasificacion varchar2(30) not null,
    director VARCHAR2(100) not null
);

create table Salas(
    sala_id number primary key,
    numero_sala number not null,
    capacidad number not null
);

create table Funciones(
    funcion_id number primary key,
    pelicula_id number not null,
    sala_id number not null,
    fecha date not null,
    hora_inicio number not null,
    hora_fin number not null
);

create table Clientes(
    cliente_id number primary key,
    nombre VARCHAR2(100) not null,
    email VARCHAR2(100) not null,
    telefono VARCHAR2(15),
    fecha_nacimiento date not null
);

create table Reserva(
    reserva_id number primary key,
    cliente_id number not null,
    funcion_id number not null,
    asientos_reservados number not null,
    fecha_reserva date not null,
    total_pago number not null
);

create table  Empleados (
    empleado_id NUMBER PRIMARY KEY,
    nombre VARCHAR2(100) NOT NULL,
    puesto VARCHAR2(50) NOT NULL,
    salario NUMBER NOT NULL,
    fecha_contratacion DATE NOT NULL
);
create table empleados_Sala(
    empleado_sala_id number primary key,
    empleado_id number not null,
    sala_id number not null
);
-- Relación entre 'funciones' y 'peliculas'
ALTER TABLE Funciones
ADD FOREIGN KEY (pelicula_id) REFERENCES peliculas(pelicula_id);

-- Relación entre 'funciones' y 'salas'
ALTER TABLE Funciones
ADD FOREIGN KEY (sala_id) REFERENCES salas(sala_id);

-- Relación entre 'reservas' y 'clientes'
ALTER TABLE Reserva 
ADD FOREIGN KEY (cliente_id) REFERENCES clientes(cliente_id);

-- Relación entre 'reservas' y 'funciones'
ALTER TABLE Reserva
ADD FOREIGN KEY (funcion_id) REFERENCES Funciones(funcion_id);
--Relacion entre 'Sala' y 'Empleados'
ALTER TABLE empleados_Sala
ADD FOREIGN KEY (empleado_id) REFERENCES Empleados(empleado_id);

-- Relación entre 'empleados_Sala' y 'Salas'
ALTER TABLE empleados_Sala
ADD FOREIGN KEY (sala_id) REFERENCES Salas(sala_id);

--Peliculas:
INSERT INTO Peliculas (pelicula_id, titulo, genero, duracion_min, clasificacion, director) VALUES (1, 'El Eterno Despertar', 'Ciencia Ficción', 150, 'PG-13', 'Sofía Ramírez');
INSERT INTO Peliculas (pelicula_id, titulo, genero, duracion_min, clasificacion, director) VALUES (2, 'Amor en Tiempos de Cumbia', 'Comedia Romántica', 110, 'G', 'Juan Pablo Miranda');
INSERT INTO Peliculas (pelicula_id, titulo, genero, duracion_min, clasificacion, director) VALUES (3, 'El Vuelo del Cóndor', 'Documental', 95, 'G', 'Antonia Vega');
INSERT INTO Peliculas (pelicula_id, titulo, genero, duracion_min, clasificacion, director) VALUES (4, 'Furia en el Puerto', 'Acción', 130, 'R', 'Ricardo Soto');
INSERT INTO Peliculas (pelicula_id, titulo, genero, duracion_min, clasificacion, director) VALUES (5, 'La Sombra del Jaguar', 'Aventura', 120, 'PG', 'María González');
INSERT INTO Peliculas (pelicula_id, titulo, genero, duracion_min, clasificacion, director) VALUES (6, 'Café y Misterio', 'Thriller', 105, 'PG-13', 'Luis Fernández');
INSERT INTO Peliculas (pelicula_id, titulo, genero, duracion_min, clasificacion, director) VALUES (7, 'Bajo el Mismo Sol', 'Drama', 115, 'G', 'Ana Martínez');
INSERT INTO Peliculas (pelicula_id, titulo, genero, duracion_min, clasificacion, director) VALUES (8, 'Risas en la Playa', 'Comedia', 98, 'G', 'Carlos Pérez');
---Salas:
INSERT INTO Salas (sala_id, numero_sala, capacidad) VALUES (1, 1, 150);
INSERT INTO Salas (sala_id, numero_sala, capacidad) VALUES (2, 2, 100);
INSERT INTO Salas (sala_id, numero_sala, capacidad) VALUES (3, 3, 200);
INSERT INTO Salas (sala_id, numero_sala, capacidad) VALUES (4, 4, 120);
INSERT INTO Salas (sala_id, numero_sala, capacidad) VALUES (5, 5, 180);
INSERT INTO Salas (sala_id, numero_sala, capacidad) VALUES (6, 6, 160);
INSERT INTO Salas (sala_id, numero_sala, capacidad) VALUES (7, 7, 140);
INSERT INTO Salas (sala_id, numero_sala, capacidad) VALUES (8, 8, 220);
INSERT INTO Salas (sala_id, numero_sala, capacidad) VALUES (9, 9, 130);
INSERT INTO Salas (sala_id, numero_sala, capacidad) VALUES (10, 10, 170);

--Funciones:
INSERT INTO Funciones (funcion_id, pelicula_id, sala_id, fecha, hora_inicio, hora_fin) VALUES (1, 1, 1, TO_DATE('2025-09-16', 'YYYY-MM-DD'), 1900, 2130);
INSERT INTO Funciones (funcion_id, pelicula_id, sala_id, fecha, hora_inicio, hora_fin) VALUES (2, 2, 2, TO_DATE('2025-09-16', 'YYYY-MM-DD'), 2000, 2150);
INSERT INTO Funciones (funcion_id, pelicula_id, sala_id, fecha, hora_inicio, hora_fin) VALUES (3, 1, 1, TO_DATE('2025-09-17', 'YYYY-MM-DD'), 2200, 0030);
INSERT INTO Funciones (funcion_id, pelicula_id, sala_id, fecha, hora_inicio, hora_fin) VALUES (4, 3, 3, TO_DATE('2025-09-16', 'YYYY-MM-DD'), 1830, 2005);
INSERT INTO Funciones (funcion_id, pelicula_id, sala_id, fecha, hora_inicio, hora_fin) VALUES (5, 5, 4, TO_DATE('2025-09-17', 'YYYY-MM-DD'), 1700, 1900);
INSERT INTO Funciones (funcion_id, pelicula_id, sala_id, fecha, hora_inicio, hora_fin) VALUES (6, 6, 5, TO_DATE('2025-09-18', 'YYYY-MM-DD'), 2000, 2150);
INSERT INTO Funciones (funcion_id, pelicula_id, sala_id, fecha, hora_inicio, hora_fin) VALUES (7, 7, 2, TO_DATE('2025-09-18', 'YYYY-MM-DD'), 1800, 1930);
INSERT INTO Funciones (funcion_id, pelicula_id, sala_id, fecha, hora_inicio, hora_fin) VALUES (8, 8, 3, TO_DATE('2025-09-19', 'YYYY-MM-DD'), 2100, 2230);


--CLientes:
INSERT INTO Clientes (cliente_id, nombre, email, telefono, fecha_nacimiento) VALUES (1, 'Rodrigo Torres', 'rodrigo.t@email.com', '987654321', TO_DATE('1990-05-15', 'YYYY-MM-DD'));
INSERT INTO Clientes (cliente_id, nombre, email, telefono, fecha_nacimiento) VALUES (2, 'Francisca Herrera', 'fran.h@email.com', '912345678', TO_DATE('1988-11-20', 'YYYY-MM-DD'));
INSERT INTO Clientes (cliente_id, nombre, email, telefono, fecha_nacimiento) VALUES (3, 'Benjamín Castro', 'benja.c@email.com', '955554444', TO_DATE('2001-02-28', 'YYYY-MM-DD'));
INSERT INTO Clientes (cliente_id, nombre, email, telefono, fecha_nacimiento) VALUES (4, 'Lucía Méndez', 'lucia.m@email.com', '911223344', TO_DATE('1995-07-10', 'YYYY-MM-DD'));
INSERT INTO Clientes (cliente_id, nombre, email, telefono, fecha_nacimiento) VALUES (5, 'Javier López', 'javier.l@email.com', '922334455', TO_DATE('1985-03-22', 'YYYY-MM-DD'));
INSERT INTO Clientes (cliente_id, nombre, email, telefono, fecha_nacimiento) VALUES (6, 'María Fernanda Ruiz', 'maria.ruiz@email.com', '933112233', TO_DATE('1992-08-03', 'YYYY-MM-DD'));
INSERT INTO Clientes (cliente_id, nombre, email, telefono, fecha_nacimiento) VALUES (7, 'Pedro González', 'pedro.g@email.com', '944556677', TO_DATE('1987-12-14', 'YYYY-MM-DD'));
INSERT INTO Clientes (cliente_id, nombre, email, telefono, fecha_nacimiento) VALUES (8, 'Valentina Rojas', 'valentina.r@email.com', '955667788', TO_DATE('2000-04-21', 'YYYY-MM-DD'));
INSERT INTO Clientes (cliente_id, nombre, email, telefono, fecha_nacimiento) VALUES (9, 'Santiago Morales', 'santiago.m@email.com', '966778899', TO_DATE('1998-09-30', 'YYYY-MM-DD'));
INSERT INTO Clientes (cliente_id, nombre, email, telefono, fecha_nacimiento) VALUES (10, 'Camila Vargas', 'camila.v@email.com', '977889900', TO_DATE('1993-06-18', 'YYYY-MM-DD'));


--Reservas:
INSERT INTO Reserva (reserva_id, cliente_id, funcion_id, asientos_reservados, fecha_reserva, total_pago) VALUES (1, 1, 1, 2, TO_DATE('2025-09-15', 'YYYY-MM-DD'), 10000);
INSERT INTO Reserva (reserva_id, cliente_id, funcion_id, asientos_reservados, fecha_reserva, total_pago) VALUES (2, 2, 2, 3, TO_DATE('2025-09-15', 'YYYY-MM-DD'), 15000);
INSERT INTO Reserva (reserva_id, cliente_id, funcion_id, asientos_reservados, fecha_reserva, total_pago) VALUES (3, 3, 1, 1, TO_DATE('2025-09-15', 'YYYY-MM-DD'), 5000);
INSERT INTO Reserva (reserva_id, cliente_id, funcion_id, asientos_reservados, fecha_reserva, total_pago) VALUES (4, 4, 5, 2, TO_DATE('2025-09-16', 'YYYY-MM-DD'), 8000);
INSERT INTO Reserva (reserva_id, cliente_id, funcion_id, asientos_reservados, fecha_reserva, total_pago) VALUES (5, 5, 6, 4, TO_DATE('2025-09-17', 'YYYY-MM-DD'), 16000);
INSERT INTO Reserva (reserva_id, cliente_id, funcion_id, asientos_reservados, fecha_reserva, total_pago) VALUES (6, 1, 7, 1, TO_DATE('2025-09-18', 'YYYY-MM-DD'), 4000);
INSERT INTO Reserva (reserva_id, cliente_id, funcion_id, asientos_reservados, fecha_reserva, total_pago) VALUES (7, 2, 8, 3, TO_DATE('2025-09-19', 'YYYY-MM-DD'), 12000);
--Empleados
INSERT INTO Empleados (empleado_id, nombre, puesto, salario, fecha_contratacion) VALUES (1, 'Carlos López', 'Gerente', 1200000, TO_DATE('2020-01-15', 'YYYY-MM-DD'));
INSERT INTO Empleados (empleado_id, nombre, puesto, salario, fecha_contratacion) VALUES (2, 'Ana Pérez', 'Cajero', 500000, TO_DATE('2022-06-01', 'YYYY-MM-DD'));
INSERT INTO Empleados (empleado_id, nombre, puesto, salario, fecha_contratacion) VALUES (3, 'Luis Martínez', 'Acomodador', 400000, TO_DATE('2023-03-10', 'YYYY-MM-DD'));
INSERT INTO Empleados (empleado_id, nombre, puesto, salario, fecha_contratacion) VALUES (4, 'Sofía Ramírez', 'Supervisor', 800000, TO_DATE('2021-09-01', 'YYYY-MM-DD'));
INSERT INTO Empleados (empleado_id, nombre, puesto, salario, fecha_contratacion) VALUES (5, 'Miguel Torres', 'Cajero', 500000, TO_DATE('2023-01-10', 'YYYY-MM-DD'));
INSERT INTO Empleados (empleado_id, nombre, puesto, salario, fecha_contratacion) VALUES (6, 'Elena Gómez', 'Acomodador', 400000, TO_DATE('2024-05-20', 'YYYY-MM-DD'));
INSERT INTO Empleados (empleado_id, nombre, puesto, salario, fecha_contratacion) VALUES (7, 'Javier Morales', 'Gerente', 1200000, TO_DATE('2019-03-15', 'YYYY-MM-DD'));
INSERT INTO Empleados (empleado_id, nombre, puesto, salario, fecha_contratacion) VALUES (8, 'Carla Rojas', 'Limpieza', 350000, TO_DATE('2022-11-05', 'YYYY-MM-DD'));


